import{n as p,o as g,w as x,p as f,M as m,L as j,S,q as y,O as A,i as E}from"./chunk-ZYFC6VSF-DwndViN8.js";import{r,j as e}from"./jsx-runtime-80hHRZYR.js";import{s as c}from"./supabaseClient-DDNOmXCv.js";const l=r.createContext({session:null,loading:!0}),R=({children:o})=>{const[t,n]=r.useState(null),[s,a]=r.useState(!0);r.useEffect(()=>{c.auth.getSession().then(({data:{session:i}})=>{n(i),a(!1)});const{data:{subscription:d}}=c.auth.onAuthStateChange((i,h)=>{n(h)});return()=>{d.unsubscribe()}},[]);const u=r.useMemo(()=>({session:t,loading:s}),[t,s]);return e.jsx(l.Provider,{value:u,children:o})};function w(){const{session:o,loading:t}=r.useContext(l),n=p(),{pathname:s}=g();return r.useEffect(()=>{if(console.log("AuthRedirector: Checking state...",{isLoading:t,hasSession:!!o,pathname:s}),t){console.log("AuthRedirector: Still loading, will not redirect yet.");return}o&&(s==="/login"||s==="/home")?(console.log("AuthRedirector: DECISION - User is logged in and on the login page. Redirecting to '/'."),n("/",{replace:!0})):console.log("AuthRedirector: No redirection needed based on current state.")},[o,t,n,s]),null}const L=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"}];function P({children:o}){return e.jsxs("html",{lang:"en",children:[e.jsxs("head",{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),e.jsx(m,{}),e.jsx(j,{})]}),e.jsxs("body",{children:[o,e.jsx(S,{}),e.jsx(y,{})]})]})}const O=x(function(){return e.jsxs(R,{children:[e.jsx(w,{})," ",e.jsx(A,{})]})}),k=f(function({error:t}){let n="Oops!",s="An unexpected error occurred.",a;return E(t)&&(n=t.status===404?"404":"Error",s=t.status===404?"The requested page could not be found.":t.statusText||s),e.jsxs("main",{className:"pt-16 p-4 container mx-auto",children:[e.jsx("h1",{children:n}),e.jsx("p",{children:s}),a]})});export{k as ErrorBoundary,P as Layout,O as default,L as links};
